[DEFAULT]
# Core settings remain unchanged
vector_model = text-embedding-3-large
vector_dimensions = 1024
vector_chunks = 500
db_min_tokens = 100
db_max_tokens = 300
query_model = gpt-4o
query_top_k = 30
query_temperature = 0.2335152822388104
query_max_tokens = 16384

[API]
api_call_delay_seconds = 0.01
api_max_retries = 20
# Moderate concurrency to prevent overload
api_max_concurrency = 16
api_min_concurrency = 8

[LIMITS]
max_file_size_mb = 375
max_query_file_size_mb = 7
# Conservative memory cache to prevent OOM
memory_cache_size = 100000
max_query_length = 10000
max_config_value_length = 3750
max_json_size = 37500

[PERFORMANCE]
embedding_batch_size = 500
checkpoint_interval = 20
commit_frequency = 2000
# Moderate thread pools
io_thread_pool_size = 16
cache_thread_pool_size = 8
file_processing_batch_size = 2000
sql_batch_size = 2000
# Critical: smaller reference batches prevent memory spikes
reference_batch_size = 20
query_cache_ttl_days = 30

[ALGORITHMS]
small_dataset_threshold = 7500
medium_dataset_threshold = 750000
ivf_centroid_multiplier = 6
max_centroids = 768
token_estimation_sample_size = 20
max_chunk_overlap = 150
heading_search_limit = 375
entity_extraction_limit = 750
# Hybrid search with limits
enable_hybrid_search = true
# Fusion method: 'rrf' (recommended) or 'weighted'
hybrid_fusion_method = rrf
rrf_k = 60
# Weights for 'weighted' fusion method (ignored when using RRF)
vector_weight = 0.7
bm25_weight = 0.3
# Critical: limit BM25 results to prevent crashes
bm25_max_results = 500
bm25_k1 = 1.2
bm25_b = 0.75
bm25_min_token_length = 2
bm25_rebuild_threshold = 3750
# Conservative query enhancement
enable_query_enhancement = true
query_enhancement_synonyms = false
query_enhancement_spelling = true
max_synonyms_per_word = 1
query_enhancement_cache_ttl_days = 60
spelling_correction_threshold = 0.8
synonym_relevance_threshold = 0.6
# Reranking with smaller batches
enable_reranking = true
reranking_model = cross-encoder/ms-marco-MiniLM-L-6-v2
reranking_top_k = 20
reranking_batch_size = 32
reranking_device = cpu
reranking_cache_size = 5000

# FAISS index parameters
faiss_nprobe = 32
faiss_gpu_batch_size = 512
faiss_gpu_use_float16 = true
faiss_gpu_memory_buffer_gb = 4.0